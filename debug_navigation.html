<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¼èˆªåŠŸèƒ½è°ƒè¯•é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-panel { 
            background: #f5f5f5; 
            padding: 20px; 
            border-radius: 8px; 
            margin-bottom: 20px; 
        }
        .test-button { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        .test-button:hover { background: #0056b3; }
        .status { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>ğŸ”§ ä¼ä¸šé¡µé¢å¯¼èˆªåŠŸèƒ½è°ƒè¯•</h1>
    
    <div class="debug-panel">
        <h3>ğŸ“Š å½“å‰çŠ¶æ€</h3>
        <div id="current-status" class="status info">æ­£åœ¨æ£€æŸ¥çŠ¶æ€...</div>
        
        <h3>ğŸ§ª æµ‹è¯•åŠŸèƒ½</h3>
        <button class="test-button" onclick="checkStatus()">æ£€æŸ¥çŠ¶æ€</button>
        <button class="test-button" onclick="rebindEvents()">é‡æ–°ç»‘å®šäº‹ä»¶</button>
        <button class="test-button" onclick="testAllPages()">æµ‹è¯•æ‰€æœ‰é¡µé¢</button>
        
        <h3>ğŸ¯ é¡µé¢å¯¼èˆªæµ‹è¯•</h3>
        <button class="test-button" onclick="testNavigation('dashboard')">æ§åˆ¶å°</button>
        <button class="test-button" onclick="testNavigation('user-behavior')">ç”¨æˆ·è¡Œä¸ºåˆ†æ</button>
        <button class="test-button" onclick="testNavigation('recommendations')">æ™ºèƒ½æ¨è</button>
        <button class="test-button" onclick="testNavigation('intent-analysis')">AIæ„å›¾åˆ†æ</button>
        <button class="test-button" onclick="testNavigation('products')">äº§å“ç®¡ç†</button>
        <button class="test-button" onclick="testNavigation('analytics')">æ•°æ®åˆ†æ</button>
        <button class="test-button" onclick="testNavigation('monitoring')">ç³»ç»Ÿç›‘æ§</button>
    </div>
    
    <div class="debug-panel">
        <h3>ğŸ“ è°ƒè¯•æ—¥å¿—</h3>
        <div id="debug-log" style="background: #000; color: #0f0; padding: 10px; border-radius: 4px; font-family: monospace; max-height: 300px; overflow-y: auto;"></div>
    </div>
    
    <script>
        // é‡å†™console.logä»¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
        const originalLog = console.log;
        const originalError = console.error;
        
        function addToLog(message, type = 'log') {
            const logDiv = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.style.color = type === 'error' ? '#ff6b6b' : type === 'warn' ? '#ffd93d' : '#0f0';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToLog(args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToLog(args.join(' '), 'error');
        };
        
        // æ£€æŸ¥é¡µé¢çŠ¶æ€
        function checkStatus() {
            console.log('ğŸ” æ£€æŸ¥é¡µé¢çŠ¶æ€...');
            
            if (typeof showCurrentPageStatus === 'function') {
                showCurrentPageStatus();
            } else {
                console.error('âŒ showCurrentPageStatus å‡½æ•°æœªæ‰¾åˆ°');
            }
            
            // æ£€æŸ¥å¯¼èˆªå…ƒç´ 
            const navLinks = document.querySelectorAll('.nav-link');
            const pageContents = document.querySelectorAll('.page-content');
            
            console.log(`ğŸ“Š é¡µé¢å…ƒç´ çŠ¶æ€:`);
            console.log(`   å¯¼èˆªé“¾æ¥æ•°é‡: ${navLinks.length}`);
            console.log(`   é¡µé¢å†…å®¹æ•°é‡: ${pageContents.length}`);
            
            // æ£€æŸ¥æ¯ä¸ªå¯¼èˆªé“¾æ¥
            navLinks.forEach((link, index) => {
                const pageName = link.getAttribute('data-page');
                const isActive = link.classList.contains('active');
                console.log(`   å¯¼èˆªé“¾æ¥ ${index + 1}: ${pageName} (${isActive ? 'æ¿€æ´»' : 'æœªæ¿€æ´»'})`);
            });
            
            // æ£€æŸ¥æ¯ä¸ªé¡µé¢å†…å®¹
            pageContents.forEach((page, index) => {
                const pageId = page.id;
                const isActive = page.classList.contains('active');
                console.log(`   é¡µé¢å†…å®¹ ${index + 1}: ${pageId} (${isActive ? 'æ˜¾ç¤º' : 'éšè—'})`);
            });
        }
        
        // é‡æ–°ç»‘å®šäº‹ä»¶
        function rebindEvents() {
            console.log('ğŸ”§ é‡æ–°ç»‘å®šå¯¼èˆªäº‹ä»¶...');
            
            if (typeof rebindNavigationEvents === 'function') {
                rebindNavigationEvents();
            } else {
                console.error('âŒ rebindNavigationEvents å‡½æ•°æœªæ‰¾åˆ°');
            }
        }
        
        // æµ‹è¯•æ‰€æœ‰é¡µé¢
        function testAllPages() {
            console.log('ğŸ§ª æµ‹è¯•æ‰€æœ‰é¡µé¢å¯¼èˆª...');
            
            const pages = ['dashboard', 'user-behavior', 'recommendations', 'intent-analysis', 'products', 'analytics', 'monitoring'];
            
            pages.forEach((page, index) => {
                setTimeout(() => {
                    console.log(`æµ‹è¯•é¡µé¢ ${index + 1}: ${page}`);
                    if (typeof testNavigation === 'function') {
                        testNavigation(page);
                    } else {
                        console.error('âŒ testNavigation å‡½æ•°æœªæ‰¾åˆ°');
                    }
                }, index * 1000);
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥çŠ¶æ€
        window.addEventListener('load', function() {
            console.log('ğŸš€ è°ƒè¯•é¡µé¢åŠ è½½å®Œæˆ');
            setTimeout(checkStatus, 1000);
        });
    </script>
</body>
</html>
