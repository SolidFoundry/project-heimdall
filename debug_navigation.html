<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>导航功能调试页面</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-panel { 
            background: #f5f5f5; 
            padding: 20px; 
            border-radius: 8px; 
            margin-bottom: 20px; 
        }
        .test-button { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        .test-button:hover { background: #0056b3; }
        .status { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>🔧 企业页面导航功能调试</h1>
    
    <div class="debug-panel">
        <h3>📊 当前状态</h3>
        <div id="current-status" class="status info">正在检查状态...</div>
        
        <h3>🧪 测试功能</h3>
        <button class="test-button" onclick="checkStatus()">检查状态</button>
        <button class="test-button" onclick="rebindEvents()">重新绑定事件</button>
        <button class="test-button" onclick="testAllPages()">测试所有页面</button>
        
        <h3>🎯 页面导航测试</h3>
        <button class="test-button" onclick="testNavigation('dashboard')">控制台</button>
        <button class="test-button" onclick="testNavigation('user-behavior')">用户行为分析</button>
        <button class="test-button" onclick="testNavigation('recommendations')">智能推荐</button>
        <button class="test-button" onclick="testNavigation('intent-analysis')">AI意图分析</button>
        <button class="test-button" onclick="testNavigation('products')">产品管理</button>
        <button class="test-button" onclick="testNavigation('analytics')">数据分析</button>
        <button class="test-button" onclick="testNavigation('monitoring')">系统监控</button>
    </div>
    
    <div class="debug-panel">
        <h3>📝 调试日志</h3>
        <div id="debug-log" style="background: #000; color: #0f0; padding: 10px; border-radius: 4px; font-family: monospace; max-height: 300px; overflow-y: auto;"></div>
    </div>
    
    <script>
        // 重写console.log以显示在页面上
        const originalLog = console.log;
        const originalError = console.error;
        
        function addToLog(message, type = 'log') {
            const logDiv = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.style.color = type === 'error' ? '#ff6b6b' : type === 'warn' ? '#ffd93d' : '#0f0';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToLog(args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToLog(args.join(' '), 'error');
        };
        
        // 检查页面状态
        function checkStatus() {
            console.log('🔍 检查页面状态...');
            
            if (typeof showCurrentPageStatus === 'function') {
                showCurrentPageStatus();
            } else {
                console.error('❌ showCurrentPageStatus 函数未找到');
            }
            
            // 检查导航元素
            const navLinks = document.querySelectorAll('.nav-link');
            const pageContents = document.querySelectorAll('.page-content');
            
            console.log(`📊 页面元素状态:`);
            console.log(`   导航链接数量: ${navLinks.length}`);
            console.log(`   页面内容数量: ${pageContents.length}`);
            
            // 检查每个导航链接
            navLinks.forEach((link, index) => {
                const pageName = link.getAttribute('data-page');
                const isActive = link.classList.contains('active');
                console.log(`   导航链接 ${index + 1}: ${pageName} (${isActive ? '激活' : '未激活'})`);
            });
            
            // 检查每个页面内容
            pageContents.forEach((page, index) => {
                const pageId = page.id;
                const isActive = page.classList.contains('active');
                console.log(`   页面内容 ${index + 1}: ${pageId} (${isActive ? '显示' : '隐藏'})`);
            });
        }
        
        // 重新绑定事件
        function rebindEvents() {
            console.log('🔧 重新绑定导航事件...');
            
            if (typeof rebindNavigationEvents === 'function') {
                rebindNavigationEvents();
            } else {
                console.error('❌ rebindNavigationEvents 函数未找到');
            }
        }
        
        // 测试所有页面
        function testAllPages() {
            console.log('🧪 测试所有页面导航...');
            
            const pages = ['dashboard', 'user-behavior', 'recommendations', 'intent-analysis', 'products', 'analytics', 'monitoring'];
            
            pages.forEach((page, index) => {
                setTimeout(() => {
                    console.log(`测试页面 ${index + 1}: ${page}`);
                    if (typeof testNavigation === 'function') {
                        testNavigation(page);
                    } else {
                        console.error('❌ testNavigation 函数未找到');
                    }
                }, index * 1000);
            });
        }
        
        // 页面加载完成后自动检查状态
        window.addEventListener('load', function() {
            console.log('🚀 调试页面加载完成');
            setTimeout(checkStatus, 1000);
        });
    </script>
</body>
</html>
