<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript类测试</title>
</head>
<body>
    <h1>JavaScript类测试</h1>
    <div id="test-results"></div>
    
    <!-- 直接加载企业前端JavaScript -->
    <script src="/static/js/enterprise.js"></script>
    
    <script>
        // 延迟测试以确保JavaScript加载完成
        setTimeout(function() {
            const resultsDiv = document.getElementById('test-results');
            
            // 测试所有必需的类和变量
            const tests = [
                { name: 'PageNavigator', exists: typeof PageNavigator !== 'undefined' },
                { name: 'RecommendationEngine', exists: typeof RecommendationEngine !== 'undefined' },
                { name: 'IntentAnalyzer', exists: typeof IntentAnalyzer !== 'undefined' },
                { name: 'API_BASE_URL', exists: typeof API_BASE_URL !== 'undefined' },
                { name: 'SESSION_ID', exists: typeof SESSION_ID !== 'undefined' }
            ];
            
            resultsDiv.innerHTML = `
                <h2>JavaScript加载测试结果:</h2>
                <ul>
                    ${tests.map(test => 
                        `<li>${test.name}: ${test.exists ? '✅' : '❌'}</li>`
                    ).join('')}
                </ul>
            `;
            
            // 如果所有类都存在，尝试创建实例
            if (tests.every(test => test.exists)) {
                resultsDiv.innerHTML += '<h2>创建实例测试:</h2>';
                
                try {
                    const pageNavigator = new PageNavigator();
                    resultsDiv.innerHTML += '<p>✅ PageNavigator 实例创建成功</p>';
                } catch (e) {
                    resultsDiv.innerHTML += `<p>❌ PageNavigator 实例创建失败: ${e.message}</p>`;
                }
                
                try {
                    const recommendationEngine = new RecommendationEngine();
                    resultsDiv.innerHTML += '<p>✅ RecommendationEngine 实例创建成功</p>';
                } catch (e) {
                    resultsDiv.innerHTML += `<p>❌ RecommendationEngine 实例创建失败: ${e.message}</p>`;
                }
                
                try {
                    const intentAnalyzer = new IntentAnalyzer();
                    resultsDiv.innerHTML += '<p>✅ IntentAnalyzer 实例创建成功</p>';
                } catch (e) {
                    resultsDiv.innerHTML += `<p>❌ IntentAnalyzer 实例创建失败: ${e.message}</p>`;
                }
            }
            
            // 显示详细信息
            resultsDiv.innerHTML += `
                <h2>详细信息:</h2>
                <p>API_BASE_URL: ${typeof API_BASE_URL !== 'undefined' ? API_BASE_URL : 'undefined'}</p>
                <p>SESSION_ID: ${typeof SESSION_ID !== 'undefined' ? SESSION_ID : 'undefined'}</p>
            `;
            
            // 显示错误信息（如果有）
            if (typeof console !== 'undefined' && console.error) {
                resultsDiv.innerHTML += '<h2>控制台错误:</h2>';
                resultsDiv.innerHTML += '<p>请查看浏览器控制台获取详细错误信息</p>';
            }
        }, 1000); // 延迟1秒确保JavaScript加载完成
    </script>
</body>
</html>