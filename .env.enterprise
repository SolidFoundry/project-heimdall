# 企业级环境配置模板
# 复制此文件为 .env 并填入实际值

# =============================================================================
# 应用基础配置
# =============================================================================
BUILD_ENV=production
APP_VERSION=1.0.0
APP_NAME=heimdall
DEBUG=false

# =============================================================================
# 数据库配置
# =============================================================================
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_DATABASE=heimdall_db
DATABASE_USERNAME=heimdall_user
DATABASE_PASSWORD=heimdall_password

# 数据库连接池配置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# Redis配置
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DATABASE=0
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_MAX_CONNECTIONS=20
REDIS_TIMEOUT=5

# =============================================================================
# 安全配置
# =============================================================================
# 必须使用32字节的随机密钥
SECRET_KEY=v7cyqgyrwfIcHvODgEZ1xOYT7VhFF3Ho

# 加密密钥 (必须是32字节)
ENCRYPTION_KEY=EfYHFc3BFLOTfpgyC43t9XJnxItiH3zi

# JWT配置
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# 安全头部配置
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com
CORS_ORIGINS=http://localhost:3000,https://yourdomain.com

# 速率限制配置
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# =============================================================================
# OpenAI API配置
# =============================================================================
OPENAI_API_KEY="sk-4dbe359e6a7c4404b4611e49a985ee2b"
OPENAI_BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"
OPENAI_TIMEOUT=30
OPENAI_MAX_RETRIES=3

# =============================================================================
# 监控配置
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=8080
ENABLE_TRACING=true
TRACING_SAMPLING_RATE=0.1
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_PATH=logs/app.log
LOG_MAX_FILE_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5
LOG_ENABLE_REQUEST_ID=true
LOG_ENABLE_PERFORMANCE_TRACKING=true

# =============================================================================
# 监控服务配置
# =============================================================================
GRAFANA_PASSWORD=your_secure_grafana_password_here
PROMETHEUS_RETENTION_DAYS=15

# =============================================================================
# 容器配置
# =============================================================================
DOCKER_IMAGE_TAG=latest
DOCKER_REPLICAS=2
DOCKER_MEMORY_LIMIT=1G
DOCKER_CPU_LIMIT=0.5

# =============================================================================
# 邮件通知配置 (可选)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_USE_TLS=true
ALERT_EMAIL_RECIPIENTS=admin@yourdomain.com

# =============================================================================
# 外部服务配置 (可选)
# =============================================================================
# Slack通知
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# PagerDuty告警
PAGERDUTY_API_KEY=your_pagerduty_api_key
PAGERDUTY_SERVICE_ID=your_service_id

# DataDog监控
DATADOG_API_KEY=your_datadog_api_key
DATADOG_APP_KEY=your_datadog_app_key

# =============================================================================
# 开发环境配置 (仅在开发时使用)
# =============================================================================
# 开发环境时取消注释以下配置
# DEBUG=true
# LOG_LEVEL=DEBUG
# DATABASE_ECHO=true
# CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# =============================================================================
# 生产环境安全注意事项
# =============================================================================
# 1. 所有密码和密钥必须使用强随机值
# 2. 定期轮换密钥和密码
# 3. 不要在版本控制中提交真实的密钥
# 4. 使用密钥管理服务（如AWS Secrets Manager、HashiCorp Vault）
# 5. 启用防火墙和网络安全组
# 6. 定期更新依赖包和安全补丁
# 7. 启用SSL/TLS加密
# 8. 实施网络隔离和访问控制